<!DOCTYPE html>
<html id="html-root">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#007bff" />
  <title>Instructions TPL</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" sizes="192x192" href="tpl-logo.png" />
  <link rel="apple-touch-icon" href="tpl-logo.png" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <!-- MENU + HEADER identiques, je ne les recopie pas ici pour gagner de la place -->

  <main class="instructions-container">
    <section class="instructions-card">
      <h2 id="instructions-title"></h2>
      <p id="instructions-welcome"></p>

      <h3 id="step1-title"></h3>
      <ul id="step1-items"></ul>

      <h3 id="step2-title"></h3>
      <ul id="step2-items"></ul>

      <h3 id="step3-title"></h3>
      <ul id="step3-items"></ul>

      <hr />

      <h3 id="map-title"></h3>
      <p id="map-text"></p>

      <div class="map-container">
        <iframe 
          style="width: 100%; height: 350px; border: 0;" 
          allowfullscreen 
          allow="geolocation"
          src="//umap.openstreetmap.fr/fr/map/points-tpl-nantes-russe_1315005?scaleControl=false&miniMap=false&scrollWheelZoom=false&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">
        </iframe>
      </div>

      <p style="text-align:center; margin-top:10px;">
        <a id="fullscreen-map" href="//umap.openstreetmap.fr/fr/map/points-tpl-nantes-russe_1315005?scrollWheelZoom=true&zoomControl=true" target="_blank">
        </a>
      </p>

      <hr />

      <h3 id="tips-title"></h3>
      <p id="tips-text"></p>
    </section>
  </main>

  <script>
    /****************************************
     * 1. TRADUCTIONS : FR + RU
     ****************************************/
    const translations = {
      fr: {
        instructionsTitle: "ðŸ“‹ Instructions TPL",
        instructionsWelcome: "Bienvenue dans la section des instructions du projet TPL.",
        step1Title: "ðŸ”¹ Ã‰tape 1 â€” PrÃ©paration",
        step1Items: [
          "Consultez votre planning sur la page dâ€™accueil.",
          "VÃ©rifiez que le crÃ©neau souhaitÃ© est libre.",
          "Utilisez le bouton + pour ajouter un Ã©vÃ©nement si nÃ©cessaire."
        ],
        step2Title: "ðŸ”¹ Ã‰tape 2 â€” Sur place",
        step2Items: [
          "Suivez les indications propres Ã  votre poste (HÃ´tel-Dieu, PrÃ©fecture, Tour Bretagne, etc.).",
          "Restez dans une zone sÃ©curisÃ©e et changez rÃ©guliÃ¨rement dâ€™endroit.",
          "En cas de danger (personne agressive...), quittez les lieux si nÃ©cessaire."
        ],
        step3Title: "ðŸ”¹ Ã‰tape 3 â€” AprÃ¨s le service",
        step3Items: [
          "Transmettez les remarques importantes Ã  frÃ¨re TimothÃ© Devin.",
          "Nâ€™hÃ©sitez pas Ã  vous inscrire Ã  d'autres crÃ©neaux."
        ],
        mapTitle: "ðŸ—ºï¸ Carte des points TPL",
        mapText: "Voici la carte des diffÃ©rents points utilisÃ©s pour le TPL :",
        fullscreenMap: "ðŸ”Ž Ouvrir la carte en plein Ã©cran",
        tipsTitle: "â„¹ï¸ Astuces",
        tipsText: "Le site fonctionne hors-ligne grÃ¢ce au mode PWA. Vous pouvez lâ€™ajouter Ã  lâ€™Ã©cran dâ€™accueil."
      },

      ru: {
        instructionsTitle: "ðŸ“‹ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ TPL",
        instructionsWelcome: "Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° TPL.",
        step1Title: "ðŸ”¹ Ð¨Ð°Ð³ 1 â€” ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°",
        step1Items: [
          "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐ²Ð¾Ñ‘ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð½Ð° Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ.",
          "Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ñ‹Ð¹ Ð²Ð°Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ ÑÐ»Ð¾Ñ‚ ÑÐ²Ð¾Ð±Ð¾Ð´ÐµÐ½.",
          "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ +, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸."
        ],
        step2Title: "ðŸ”¹ Ð¨Ð°Ð³ 2 â€” ÐÐ° Ð¼ÐµÑÑ‚Ðµ",
        step2Items: [
          "Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸, ÑÐ²ÑÐ·Ð°Ð½Ð½Ð¾Ð¹ Ñ Ð²Ð°ÑˆÐ¸Ð¼ ÑƒÑ‡Ð°ÑÑ‚ÐºÐ¾Ð¼ (HÃ´tel-Dieu, PrÃ©fecture, Tour Bretagne Ð¸ Ñ‚.Ð´.).",
          "ÐÐ°Ñ…Ð¾Ð´Ð¸Ñ‚ÐµÑÑŒ Ð² Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ð¹ Ð·Ð¾Ð½Ðµ Ð¸ Ñ€ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð¼ÐµÐ½ÑÐ¹Ñ‚Ðµ ÑÐ²Ð¾Ñ‘ Ñ€Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ.",
          "Ð’ ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ (Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¸ Ñ‚.Ð¿.) Ð¿Ð¾ÐºÐ¸Ð½ÑŒÑ‚Ðµ Ð¼ÐµÑÑ‚Ð¾, ÐµÑÐ»Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾."
        ],
        step3Title: "ðŸ”¹ Ð¨Ð°Ð³ 3 â€” ÐŸÐ¾ÑÐ»Ðµ ÑÐ»ÑƒÐ¶ÐµÐ½Ð¸Ñ",
        step3Items: [
          "Ð¡Ð¾Ð¾Ð±Ñ‰Ð¸Ñ‚Ðµ Ð²Ð°Ð¶Ð½Ñ‹Ðµ Ð·Ð°Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ Ð±Ñ€Ð°Ñ‚Ñƒ Ð¢Ð¸Ð¼Ð¾Ñ‚Ðµ Ð”ÐµÐ²Ð¸Ð½Ñƒ.",
          "ÐÐµ ÑÑ‚ÐµÑÐ½ÑÐ¹Ñ‚ÐµÑÑŒ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ ÑÐ»Ð¾Ñ‚Ñ‹."
        ],
        mapTitle: "ðŸ—ºï¸ ÐšÐ°Ñ€Ñ‚Ð° Ñ‚Ð¾Ñ‡ÐµÐº TPL",
        mapText: "Ð’Ð¾Ñ‚ ÐºÐ°Ñ€Ñ‚Ð° Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð¼ÐµÑÑ‚, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ñ… Ð´Ð»Ñ TPL:",
        fullscreenMap: "ðŸ”Ž ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñƒ Ð½Ð° Ð²ÐµÑÑŒ ÑÐºÑ€Ð°Ð½",
        tipsTitle: "â„¹ï¸ Ð¡Ð¾Ð²ÐµÑ‚Ñ‹",
        tipsText: "Ð¡Ð°Ð¹Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¾Ñ„Ð»Ð°Ð¹Ð½ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ñ PWA. Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐµÐ³Ð¾ Ð½Ð° Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÑÐºÑ€Ð°Ð½."
      }
    };

    /****************************************
     * 2. APPLIQUER UNE LANGUE
     ****************************************/
    function updateInstructionsLanguage(lang) {
      const t = translations[lang];
      if (!t) return;

      document.getElementById("instructions-title").textContent = t.instructionsTitle;
      document.getElementById("instructions-welcome").textContent = t.instructionsWelcome;

      const s1 = document.getElementById("step1-items");
      s1.innerHTML = "";
      t.step1Items.forEach(txt => { const li = document.createElement("li"); li.textContent = txt; s1.appendChild(li); });

      const s2 = document.getElementById("step2-items");
      s2.innerHTML = "";
      t.step2Items.forEach(txt => { const li = document.createElement("li"); li.textContent = txt; s2.appendChild(li); });

      const s3 = document.getElementById("step3-items");
      s3.innerHTML = "";
      t.step3Items.forEach(txt => { const li = document.createElement("li"); li.textContent = txt; s3.appendChild(li); });

      document.getElementById("step1-title").textContent = t.step1Title;
      document.getElementById("step2-title").textContent = t.step2Title;
      document.getElementById("step3-title").textContent = t.step3Title;

      document.getElementById("map-title").textContent = t.mapTitle;
      document.getElementById("map-text").textContent = t.mapText;
      document.getElementById("fullscreen-map").textContent = t.fullscreenMap;

      document.getElementById("tips-title").textContent = t.tipsTitle;
      document.getElementById("tips-text").textContent = t.tipsText;

      document.getElementById("lang-toggle").textContent = lang === "fr" ? "ðŸ‡«ðŸ‡·" : "ðŸ‡·ðŸ‡º";
      document.getElementById("side-lang-toggle").textContent = lang === "fr" ? "ðŸ‡«ðŸ‡·" : "ðŸ‡·ðŸ‡º";
    }

    /****************************************
     * 3. BASCULER LA LANGUE
     ****************************************/
    function toggleLanguage() {
      const current = localStorage.getItem("language") || "fr";
      const next = current === "fr" ? "ru" : "fr";
      localStorage.setItem("language", next);
      document.documentElement.lang = next;
      updateInstructionsLanguage(next);
    }

    /****************************************
     * 4. INITIALISATION
     ****************************************/
    const initialLang = localStorage.getItem("language") || "fr";
    document.documentElement.lang = initialLang;
    updateInstructionsLanguage(initialLang);

    document.getElementById("lang-toggle").onclick = toggleLanguage;
    document.getElementById("side-lang-toggle").onclick = toggleLanguage;
  </script>
</body>
</html>
