<!DOCTYPE html>
<html id="html-root" lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#007bff" />
  <title>Instructions TPL</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Favicon + PWA -->
  <link rel="icon" type="image/png" sizes="192x192" href="tpl-logo.png" />
  <link rel="apple-touch-icon" href="tpl-logo.png" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <!-- SIDE MENU + OVERLAY -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <nav class="side-menu" id="side-menu" aria-hidden="true">
    <div class="side-menu-header">
      <img src="tpl-logo.png" alt="Logo TPL" class="side-logo" />
      <button id="menu-close" class="menu-close" aria-label="Close menu">‚úï</button>
    </div>

    <ul class="side-links">
      <li><a href="index.html" class="side-link">üóìÔ∏è Planning</a></li>
      <li><a href="instructions.html" class="side-link active">üìñ Instructions</a></li>
    </ul>

    <div class="side-actions">
      <button id="side-theme-toggle" class="side-action-btn" aria-label="Toggle theme">üåô</button>
      <button id="side-lang-toggle" class="side-action-btn" aria-label="Toggle language">üá∑üá∫</button>
    </div>
  </nav>

  <!-- HEADER -->
  <header>
    <div class="header-left">
      <button id="menu-btn" class="menu-btn" aria-label="Open menu">‚ò∞</button>
      <img src="tpl-logo.png" alt="Logo TPL" class="logo" />
      <h1 id="header-title">Planning TPL</h1>
    </div>

    <nav class="main-nav">
      <a href="index.html" class="nav-link">Planning</a>
      <a href="instructions.html" class="nav-link active">Instructions</a>
    </nav>

    <div class="header-buttons">
      <button id="theme-toggle" title="Toggle theme">üåô</button>
      <button id="lang-toggle" title="Toggle language">üá∑üá∫</button>
    </div>
  </header>

  <!-- CONTENT -->
  <main class="instructions-container">
    <section class="instructions-card">
      <h2 id="instructions-title">üìã Instructions TPL</h2>
      <p id="instructions-welcome">Bienvenue dans la section Instructions pour le <strong>TPL</strong>.</p>

      <h3 id="step1-title">üîπ √âtape 1 ‚Äî Pr√©paration</h3>
      <ul id="step1-items">
        <li>Avant de placer votre cr√©neau, v√©rifiez sa disponibilit√©.</li>
        <li>Utilisez le bouton <strong>+</strong> pour ajouter un √©v√©nement si n√©cessaire.</li>
        <li>Pour que le cr√©neau soit bien √©crit, merci d'indiquer votre nom et pr√©nom. Exemple : "DUPONT Jean".</li>
        <li>Vous pouvez modifier votre √©v√©nement. <strong>Veillez √† ne pas modifier les cr√©neaux d'autres compagnons, afin d'√©viter les erreurs de planning</strong>.</li>
        <li>Vous ne pouvez pas supprimer un √©v√©nement. Si vous avez fait une erreur, ou si vous souhaitez annuler votre cr√©neau, veuillez contacter le fr√®re Timoth√© DEVIN.</li>
        <li>Lorsque vous r√©cup√©rez le pr√©sentoir, vous pouvez choisir une des affiches disponibles (le th√®me du mois est en premier). Si vous constatez un probl√®me au niveau des affiches, ou des publications manquantes ou en mauvais √©tat, merci de contacter fr√®re Timoth√© DEVIN.</li>
      </ul>

      <h3 id="step2-title">üîπ √âtape 2 ‚Äî Sur place</h3>
      <ul id="step2-items">
        <li>Veillez √† respecter les emplacements indiqu√©es sur la carte ci-dessous pour les diff√©rentes sites (H√¥tel-Dieu, Pr√©fecture, Tour Bretagne, etc.).</li>
        <li>Restez dans une zone s√©curis√©e et changez r√©guli√®rement de position.</li>
        <li>En cas de danger (personne agressive, etc.), quittez le lieu si n√©cessaire. Si besoin, n'h√©sitez pas √† laisser le pr√©sentoir sur place</li>
      </ul>

      <h3 id="step3-title">üîπ √âtape 3 ‚Äî Apr√®s le service</h3>
      <ul id="step3-items">
        <li>Remontez les remarques importantes (incidents, faits inhabituels) √† fr√®re Timoth√© Devin.</li>
        <li>N‚Äôh√©sitez pas √† vous inscrire sur d‚Äôautres cr√©neaux.</li>
      </ul>

      <hr />

      <h3 id="map-title">üó∫Ô∏è Carte des points TPL</h3>
      <p id="map-text">Voici la carte des diff√©rents lieux utilis√©s pour le projet TPL :</p>

      <div class="map-container">
        <iframe 
          style="width: 100%; height: 350px; border: 0;" 
          allowfullscreen 
          allow="geolocation"
          src="//umap.openstreetmap.fr/fr/map/points-tpl-nantes-russe_1315005?scaleControl=false&miniMap=false&scrollWheelZoom=false&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true">
        </iframe>
      </div>

      <p style="text-align:center; margin-top:10px;">
        <a id="fullscreen-map" href="//umap.openstreetmap.fr/fr/map/points-tpl-nantes-russe_1315005?scrollWheelZoom=true&zoomControl=true" target="_blank">
          üîé Ouvrir la carte en plein √©cran
        </a>
      </p>

      <hr />

      <h3 id="tips-title">‚ÑπÔ∏è Conseils</h3>
      <p id="tips-text">Le site fonctionne hors ligne gr√¢ce √† la PWA. Vous pouvez l‚Äôajouter √† l‚Äô√©cran d‚Äôaccueil de votre t√©l√©phone ou tablette. En vous inscrivant sur un cr√©neau, vous acceptez d'√©crire votre nom et pr√©nom. Aucune autre donn√©e n'est conserv√©e.</p>
    </section>
  </main>

  <!-- Scripts -->
  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const translations = {
        fr: {
          instructionsTitle: "üìã Instructions TPL",
          instructionsWelcome: "Bienvenue dans la section Instructions du TPL.",
          step1Title: "üîπ √âtape 1 ‚Äî Pr√©paration",
          step1Items: [
            "Avant de placer votre cr√©neau, v√©rifiez sa disponibilit√©.",
            "Utilisez le bouton + pour ajouter un √©v√©nement si n√©cessaire."
            "Pour que le cr√©neau soit bien √©crit, merci d'indiquer votre nom et pr√©nom. Exemple : DUPONT Jean."
            "Vous pouvez modifier votre √©v√©nement. Veillez √† ne pas modifier les cr√©neaux d'autres compagnons, afin d'√©viter les erreurs de planning."
            "Vous ne pouvez pas supprimer un √©v√©nement. Si vous avez fait une erreur, ou si vous souhaitez annuler votre cr√©neau, veuillez contacter le fr√®re Timoth√© DEVIN."
            "Lorsque vous r√©cup√©rez le pr√©sentoir, vous pouvez choisir une des affiches disponibles (le th√®me du mois est en premier). Si vous constatez un probl√®me au niveau des affiches, ou des publications manquantes ou en mauvais √©tat, merci de contacter fr√®re Timoth√© DEVIN."
          ],
          step2Title: "üîπ √âtape 2 ‚Äî Sur place",
          step2Items: [
            "Veillez √† respecter les emplacements indiqu√©es sur la carte ci-dessous pour les diff√©rentes sites (H√¥tel-Dieu, Pr√©fecture, Tour Bretagne, etc.).",
            "Restez dans une zone s√©curis√©e et changez r√©guli√®rement de position.",
            "En cas de danger (personne agressive, etc.), quittez le lieu si n√©cessaire. Si besoin, n'h√©sitez pas √† laisser le pr√©sentoir sur place"
          ],
          step3Title: "üîπ √âtape 3 ‚Äî Apr√®s le service",
          step3Items: [
            "Remontez les remarques importantes (incidents, faits inhabituels) √† fr√®re Timoth√© Devin.",
            "N‚Äôh√©sitez pas √† vous inscrire sur d‚Äôautres cr√©neaux."
          ],
          mapTitle: "üó∫Ô∏è Carte des points TPL",
          mapText: "Voici la carte des diff√©rents lieux utilis√©s pour le projet TPL :",
          fullscreenMap: "üîé Ouvrir la carte en plein √©cran",
          tipsTitle: "‚ÑπÔ∏è Conseils",
          tipsText: "Le site fonctionne hors ligne gr√¢ce √† la PWA. Vous pouvez l‚Äôajouter √† l‚Äô√©cran d‚Äôaccueil de votre t√©l√©phone ou tablette. En vous inscrivant sur un cr√©neau, vous acceptez d'√©crire votre nom et pr√©nom. Aucune autre donn√©e n'est conserv√©e."
        },
        ru: {
          instructionsTitle: "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ TPL",
          instructionsWelcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —Å—Ç–µ–Ω–¥–∞..",
          step1Title: "üîπ –®–∞–≥ 1 ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞",
          step1Items: [
            "–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∑–∞–Ω—è—Ç—å —Å–≤–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.",
            "–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É +, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ.",
            "–ß—Ç–æ–±—ã –≤–∞—à–µ –∑–∞–Ω—è—Ç–∏–µ –±—ã–ª–æ correctement –∑–∞–ø–∏—Å–∞–Ω–æ, —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é. –ü—Ä–∏–º–µ—Ä: ¬´–ò–í–ê–ù–û–í –ò–≤–∞–Ω¬ª."
            "–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ—ë —Å–æ–±—ã—Ç–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, <strong>–Ω–µ –∏–∑–º–µ–Ω—è–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏</strong>."
            "–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ. –ï—Å–ª–∏ –≤—ã –¥–æ–ø—É—Å—Ç–∏–ª–∏ –æ—à–∏–±–∫—É –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —Å–≤–æ—ë –∑–∞–Ω—è—Ç–∏–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –±—Ä–∞—Ç–æ–º –¢–∏–º–æ—Ç–∏ –î–ï–í–ò–ù."
            "–ö–æ–≥–¥–∞ –≤—ã –∑–∞–±–∏—Ä–∞–µ—Ç–µ —Å—Ç–µ–Ω–¥, –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–ª–∞–∫–∞—Ç–æ–≤ (—Ç–µ–º–∞ –º–µ—Å—è—Ü–∞ —Å—Ç–æ–∏—Ç –ø–µ—Ä–≤–æ–π). –ï—Å–ª–∏ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É —Å –ø–ª–∞–∫–∞—Ç–∞–º–∏ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ/–ø–ª–æ—Ö–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –±—Ä–∞—Ç–æ–º –¢–∏–º–æ—Ç–∏ –î–ï–í–ò–ù."
          ],
          step2Title: "üîπ –®–∞–≥ 2 ‚Äî –ù–∞ –º–µ—Å—Ç–µ",
          step2Items: [
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–±–ª—é–¥–∞–π—Ç–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –∫–∞—Ä—Ç–µ –Ω–∏–∂–µ –º–µ—Å—Ç–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–æ—á–µ–∫ (–û—Ç–µ–ª—å-–î—å—ë, –ü—Ä–µ—Ñ–µ–∫—Ç—É—Ä–∞, –¢—É—Ä –ë—Ä–µ—Ç–∞–Ω—å –∏ —Ç. –¥.).",
            "–û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω–µ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –ø–æ–∑–∏—Ü–∏—é.",
            "–í —Å–ª—É—á–∞–µ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —á–µ–ª–æ–≤–µ–∫ –∏ —Ç. –ø.) –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–∫–∏–Ω—å—Ç–µ –º–µ—Å—Ç–æ. –ü—Ä–∏ –Ω—É–∂–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–µ–Ω–¥ –Ω–∞ –º–µ—Å—Ç–µ."
          ],
          step3Title: "üîπ –®–∞–≥ 3 ‚Äî –ü–æ—Å–ª–µ —Å–ª—É–∂–µ–Ω–∏—è",
          step3Items: [
            "–ü–µ—Ä–µ–¥–∞–π—Ç–µ –±—Ä–∞—Ç—É –¢–∏–º–æ—Ç–∏ –î–ï–í–ò–ù –≤–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è (–∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã, –Ω–µ–æ–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è).",
            "–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏."
          ],
          mapTitle: "üó∫Ô∏è –ö–∞—Ä—Ç–∞ —Ç–æ—á–µ–∫ TPL",
          mapText: "–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è —Å—Ç–µ–Ω–¥.",
          fullscreenMap: "üîé –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω",
          tipsTitle: "‚ÑπÔ∏è –°–æ–≤–µ—Ç—ã",
          tipsText: "–°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è PWA. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ø–ª–∞–Ω—à–µ—Ç–∞. –ó–∞–ø–∏—Å—ã–≤–∞—è—Å—å –Ω–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–∏ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é. –î—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è."
        }
      };

      function updateInstructionsLanguage(lang) {
        if (!translations[lang]) return;

        // Texte principal
        const elems = [
          { id: "instructions-title", val: translations[lang].instructionsTitle },
          { id: "instructions-welcome", val: translations[lang].instructionsWelcome },
          { id: "step1-title", val: translations[lang].step1Title },
          { id: "step2-title", val: translations[lang].step2Title },
          { id: "step3-title", val: translations[lang].step3Title },
          { id: "map-title", val: translations[lang].mapTitle },
          { id: "map-text", val: translations[lang].mapText },
          { id: "fullscreen-map", val: translations[lang].fullscreenMap },
          { id: "tips-title", val: translations[lang].tipsTitle },
          { id: "tips-text", val: translations[lang].tipsText },
        ];

        elems.forEach(item => {
          const el = document.getElementById(item.id);
          if (el) el.textContent = item.val;
        });

        // Listes
        ["step1-items", "step2-items", "step3-items"].forEach((listId, i) => {
          const listEl = document.getElementById(listId);
          if (!listEl) return;
          listEl.innerHTML = "";
          translations[lang][`step${i+1}Items`].forEach(text => {
            const li = document.createElement("li");
            li.textContent = text;
            listEl.appendChild(li);
          });
        });

        // Boutons langue
        const langBtn = document.getElementById("lang-toggle");
        const sideLangBtn = document.getElementById("side-lang-toggle");
        if (langBtn) langBtn.textContent = lang === "fr" ? "üá´üá∑" : "üá∑üá∫";
        if (sideLangBtn) sideLangBtn.textContent = lang === "fr" ? "üá´üá∑" : "üá∑üá∫";

        document.documentElement.lang = lang;
      }

      function toggleLanguage() {
        const newLang = document.documentElement.lang === "fr" ? "ru" : "fr";
        updateInstructionsLanguage(newLang);
      }

      // √âv√©nements
      const langBtn = document.getElementById("lang-toggle");
      const sideLangBtn = document.getElementById("side-lang-toggle");
      if (langBtn) langBtn.addEventListener("click", toggleLanguage);
      if (sideLangBtn) sideLangBtn.addEventListener("click", toggleLanguage);

      // Initialisation
      updateInstructionsLanguage(document.documentElement.lang);

      // Service Worker
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("service-worker.js")
          .then(() => console.log("‚úÖ Service Worker enregistr√©"))
          .catch(err => console.error("‚ùå Erreur Service Worker :", err));
      }
    });
  </script>
</body>
</html>
