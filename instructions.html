<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#007bff" />
  <title>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ TPL</title>

  <link rel="stylesheet" href="style.css" />

  <link rel="icon" type="image/png" sizes="192x192" href="tpl-logo.png" />
  <link rel="apple-touch-icon" href="tpl-logo.png" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <nav class="side-menu" id="side-menu" aria-hidden="true">
    <div class="side-menu-header">
      <img src="tpl-logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø TPL" class="side-logo" />
      <button id="menu-close" class="menu-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é">‚úï</button>
    </div>

    <ul class="side-links">
      <li><a href="index.html" class="side-link" id="side-link-calendar">üóìÔ∏è –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a></li>
      <li><a href="instructions.html" class="side-link" id="side-link-instructions">üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</a></li>
    </ul>

    <div class="side-actions">
      <button class="side-action-btn" id="side-theme-toggle" aria-label="Changer de th√®me">
        <span class="icon-light">‚òÄÔ∏è</span>
        <span class="icon-dark">üåô</span>
      </button>

      <button class="side-action-btn" id="side-lang-toggle" aria-label="Changer de langue">
        üá´üá∑
      </button>
    </div>
  </nav>

  <div class="offline-banner hidden" id="offline-banner" aria-live="polite">
    <p id="offline-message">‚ùå Hors ligne. Le contenu affich√© n'est pas √† jour.</p>
  </div>

  <header>
    <div class="header-container">
      <button id="menu-btn" class="menu-btn" aria-label="Ouvrir le menu">‚ò∞</button>
      <h1 id="main-title">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</h1>
      <button id="lang-toggle" class="lang-toggle" aria-label="Changer de langue">üá´üá∑</button>
    </div>
  </header>

  <main class="content-container">
    <h2 id="section1-title">Comment ajouter un √©v√©nement ?</h2>
    <p id="section1-text">
      L'ajout d'un √©v√©nement se fait directement sur le planning.
    </p>

    <h3 id="step1-title">√âtape 1 : Choisir la date</h3>
    <p id="step1-text">
      Cliquez ou tapez sur le jour/l'heure souhait√©(e) dans la vue du planning. Un pop-up appara√Ætra.
    </p>

    <h3 id="step2-title">√âtape 2 : Remplir les informations</h3>
    <p id="step2-text">
      Dans le pop-up, remplissez :
    </p>
    <ul id="step2-list">
      <li>**Titre** : Votre nom et pr√©nom. (Exemple : "Jean DUPONT")</li>
      <li>**D√©but** : L'heure de d√©but de votre service.</li>
      <li>**Fin** : L'heure de fin de votre service.</li>
      <li>**Cat√©gorie** : Le lieu de votre permanence (H√¥tel-Dieu, Pr√©fecture, etc.).</li>
    </ul>

    <h3 id="step3-title">√âtape 3 : Enregistrer</h3>
    <p id="step3-text">
      Cliquez sur **¬´ Enregistrer ¬ª**. Votre √©v√©nement est maintenant visible par tous.
      Vous pouvez cliquer dessus pour le modifier ou le supprimer.
    </p>
    <ul id="step3-list">
      <li>Assurez-vous d'√™tre connect√© √† Internet pour que votre modification soit enregistr√©e sur le serveur.</li>
      <li>Si vous √™tes hors ligne, l'√©v√©nement sera enregistr√© localement et synchronis√© d√®s que possible.</li>
    </ul>

    <div class="map-container">
      <h2 id="map-title">Carte des lieux de permanence TPL</h2>
      <p id="map-text">
        Vous trouverez ici la carte interactive Umap des lieux r√©currents d'intervention de TPL.
        Elle peut √™tre bascul√©e en mode sombre pour une meilleure lisibilit√©.
      </p>
      <iframe 
        src="//umap.openstreetmap.fr/fr/map/points-tpl-nantes-russe_1315005?scaleControl=false&miniMap=false&scrollWheelZoom=false&zoomControl=true&editMode=disabled&moreControl=true&searchControl=null&tilelayersControl=null&embedControl=null&datalayersControl=true&onLoadPanel=none&captionBar=false&captionMenus=true" 
        width="100%" height="450px" frameborder="0" allowfullscreen>
      </iframe>
      <button id="fullscreen-map">Agrandir la carte</button>
    </div>

    <h2 id="tips-title">Conseils rapides</h2>
    <p id="tips-text">
      **Mode Sombre (Dark Mode)** : Utilisez le bouton üåô pour basculer en mode sombre. Ce r√©glage est conserv√©.
      <br>
      **Mode Hors Ligne** : L'application fonctionne sans connexion. Les donn√©es sont mises en cache et les modifications sont synchronis√©es plus tard.
    </p>
  </main>

  <script>
    /**************************************************************
     * üåç TRADUCTIONS
     **************************************************************/
    const translations = {
      fr: {
        title: "Instructions TPL",
        mainTitle: "Instructions d'utilisation",
        section1Title: "Comment ajouter un √©v√©nement ?",
        section1Text: "L'ajout d'un √©v√©nement se fait directement sur le planning.",
        step1Title: "√âtape 1 : Choisir la date",
        step1Text: "Cliquez ou tapez sur le jour/l'heure souhait√©(e) dans la vue du planning. Un pop-up appara√Ætra.",
        step2Title: "√âtape 2 : Remplir les informations",
        step2Text: "Dans le pop-up, remplissez :",
        step2Items: [
          "**Titre** : Votre nom et pr√©nom. (Exemple : \"Jean DUPONT\")",
          "**D√©but** : L'heure de d√©but de votre service.",
          "**Fin** : L'heure de fin de votre service.",
          "**Cat√©gorie** : Le lieu de votre permanence (H√¥tel-Dieu, Pr√©fecture, etc.)."
        ],
        step3Title: "√âtape 3 : Enregistrer",
        step3Text: "Cliquez sur **¬´ Enregistrer ¬ª**. Votre √©v√©nement est maintenant visible par tous. Vous pouvez cliquer dessus pour le modifier ou le supprimer.",
        step3Items: [
          "Assurez-vous d'√™tre connect√© √† Internet pour que votre modification soit enregistr√©e sur le serveur.",
          "Si vous √™tes hors ligne, l'√©v√©nement sera enregistr√© localement et synchronis√© d√®s que possible."
        ],
        mapTitle: "Carte des lieux de permanence TPL",
        mapText: "Vous trouverez ici la carte interactive Umap des lieux r√©currents d'intervention de TPL. Elle peut √™tre bascul√©e en mode sombre pour une meilleure lisibilit√©.",
        fullscreenMap: "Agrandir la carte",
        tipsTitle: "Conseils rapides",
        tipsText: "**Mode Sombre (Dark Mode)** : Utilisez le bouton üåô pour basculer en mode sombre. Ce r√©glage est conserv√©.<br>**Mode Hors Ligne** : L'application fonctionne sans connexion. Les donn√©es sont mises en cache et les modifications sont synchronis√©es plus tard.",
        sideLinkCalendar: "üóìÔ∏è Calendrier",
        sideLinkInstructions: "üìñ Instructions",
        offlineMessage: "‚ùå Hors ligne. Le contenu affich√© n'est pas √† jour.",
        menuClose: "Fermer le menu"
      },
      ru: {
        title: "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ TPL",
        mainTitle: "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é",
        section1Title: "–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ?",
        section1Text: "–°–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏.",
        step1Title: "–®–∞–≥ 1: –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É",
        step1Text: "–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –∫–æ—Å–Ω–∏—Ç–µ—Å—å –∂–µ–ª–∞–µ–º–æ–≥–æ –¥–Ω—è/–≤—Ä–µ–º–µ–Ω–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ. –ü–æ—è–≤–∏—Ç—Å—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ.",
        step2Title: "–®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
        step2Text: "–í–æ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–º –æ–∫–Ω–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:",
        step2Items: [
          "**–ù–∞–∑–≤–∞–Ω–∏–µ** : –í–∞—à–∏ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—è. (–ù–∞–ø—Ä–∏–º–µ—Ä: \"–ò–≤–∞–Ω –ò–í–ê–ù–û–í\")",
          "**–ù–∞—á–∞–ª–æ** : –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –≤–∞—à–µ–≥–æ –¥–µ–∂—É—Ä—Å—Ç–≤–∞.",
          "**–ö–æ–Ω–µ—Ü** : –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –¥–µ–∂—É—Ä—Å—Ç–≤–∞.",
          "**–ö–∞—Ç–µ–≥–æ—Ä–∏—è** : –ú–µ—Å—Ç–æ –≤–∞—à–µ–≥–æ –¥–µ–∂—É—Ä—Å—Ç–≤–∞ (H√¥tel-Dieu, Pr√©fecture –∏ —Ç. –¥.)."
        ],
        step3Title: "–®–∞–≥ 3: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
        step3Text: "–ù–∞–∂–º–∏—Ç–µ **¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª**. –í–∞—à–µ —Å–æ–±—ã—Ç–∏–µ —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ –≤—Å–µ–º. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–∂–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å.",
        step3Items: [
          "–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç—É, —á—Ç–æ–±—ã –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.",
          "–ï—Å–ª–∏ –≤—ã –Ω–µ –≤ —Å–µ—Ç–∏, —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏."
        ],
        mapTitle: "–ö–∞—Ä—Ç–∞ –º–µ—Å—Ç –¥–µ–∂—É—Ä—Å—Ç–≤ TPL",
        mapText: "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∫–∞—Ä—Ç—É Umap –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –º–µ—Å—Ç —Ä–∞–±–æ—Ç—ã TPL. –ï–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ —Ç–µ–º–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.",
        fullscreenMap: "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–∞—Ä—Ç—É",
        tipsTitle: "–ö—Ä–∞—Ç–∫–∏–µ —Å–æ–≤–µ—Ç—ã",
        tipsText: "**–¢–µ–º–Ω—ã–π —Ä–µ–∂–∏–º (Dark Mode)** : –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É üåô –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ —Ç–µ–º–Ω—ã–π —Ä–µ–∂–∏–º. –≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.<br>**–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º** : –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è, –∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –ø–æ–∑–∂–µ.",
        sideLinkCalendar: "üóìÔ∏è –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ",
        sideLinkInstructions: "üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
        offlineMessage: "‚ùå –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —É—Å—Ç–∞—Ä–µ–ª.",
        menuClose: "–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é"
      }
    };

    /**
     * Met √† jour le contenu de la page d'instructions dans la langue sp√©cifi√©e.
     * @param {string} lang 'fr' ou 'ru'
     */
    function updateInstructionsLanguage(lang) {
      const t = translations[lang];
      document.title = t.title;

      // Header
      document.getElementById("main-title
